<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC	
"-//mybatis.org//DTD Mapper 3.0//EN"	
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="crews">
<select id="selectSearchList"  resultType="Crew" parameterType="map">
SELECT COVER_IMG coverImg, NAME, INTRO, category_no categoryNo, avg_Age avgAge, CUR_POP curPop, gender_Rate genderRate
FROM crews
WHERE ADD_MONTHS(regdate, +6)>sysdate AND 30>CUR_POP
<if test="categoryNo != null">
AND category_no IN(SELECT no FROM categories WHERE prior_no = #{categoryNo})
</if>
<if test="minAge != null">
AND avg_age BETWEEN #{minAge} AND #{maxAge}
</if>
ORDER BY CUR_POP ${order}
</select>



</mapper>